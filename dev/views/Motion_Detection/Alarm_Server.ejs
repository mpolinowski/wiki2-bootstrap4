<!DOCTYPE html>
<html ⚡>
    <head>
        <% include ../_partials/amp/_amp-head.ejs %>
        <link rel="canonical" href="/Motion_Detection/Alarm_Server/">
    </head>

    <body class="home">

      <header class="fixed">
          <% include ../_partials/amp/_amp-header.ejs %>
      </header>

        <div class="wrap">
            <div class="container main">
              <% include ../_partials/content/_bluenav-md.ejs %>
                <article>
                    <!-- article -->

                    <div class="margin">
                        <h1>Alarm Server Funktion</h1>
                        <p>
                          Sie können die Alarm Server Funktion nutzen, um eine HTTP-Anfrage an einen verbundenen Server zu schicken. Der Server benötigt eine kompatible Software um die Anfrage als Alarm entgegenzunehmen und weitere Aktionen folgen zu lassen. Diese Funktion wird oft von Heim-Alarm-Systemen unterstützt. Sie können der Anfrage eigene Befehle hinzufügen, um in der Server Software verschiedene Aktionen auszulösen.
                        </p>
                        </amp-lightbox>
                    </div>
                    <!-- /margin -->

                    <div class="margin">
                        <h2>Alarm Server hinzufügen</h2>
                        <br>
                        <div>
                            <amp-img on="tap:lightbox1" role="button" tabindex="0" src="/images/Alarmserver_00.png" width="600" height="98" layout="responsive" class="shadow"></amp-img>
                        </div>
                        <p>
                          Öffnen Sie die Weboberfläche Ihrer (<strong>VGA!</strong>) Kamera und navigieren Sie zu <em>Alarm / Alarm Server</em>. Geben Sie Ihre Alarm Server Adresse ein und aktivieren Sie die Funktion. Bitte fügen Sie das http-Präfix vor die IP-Adresse. - z.B. <span class="code">http://192.168.1.66</span>.
                        </p>
                        <amp-lightbox id="lightbox1" layout="nodisplay">
                            <div class="lightbox" on="tap:lightbox1.close" tabindex="0" class="centered">
                                <amp-img on="tap:lightbox1.close" role="button" tabindex="0" src="/images/Alarmserver_00.png" width="600" height="98" layout="responsive" class="shadow"></amp-img>
                            </div>
                        </amp-lightbox>
                    </div>
                    <!-- /margin -->

                    <div class="margin">
                        <h2>Programm</h2>
                        <p>
                          Die Alarm Server Funktion kann mit Alarm Systemen und Heimautomations-Systemen verwendet werden wie dem <a href="http://fhem.de/fhem.html">Open Source Projekt FHEM</a>. Leider, aufgrund der verwendeten Leerzeichen in den URLs der Heimautomation, wird das Programmieren Ihrer Kamera ein wenig komplizierter. Während wir diesen Artikel schreiben, testen wir bereits an einer neuen Version der Weboberfläche für Ihre VGA Kameras , die den Work-Around überflüssig machen. Das Folgende zeigt Ihnen, wie Sie bestimmen können, ob die Kamera den Befehl korrekt versteht und wie Sie den Befehl bearbeiten können, um das Problem zu umgehen.
                        </p>
                    </div>
                    <!-- /margin -->

                    <div class="margin">
                        <p>
                          Heimautomations-Systeme wie FHEM verwenden Leerzeichen in deren URLs die als %20 codiert werden müssen.
                        </p>
                        <div>
                            <amp-img on="tap:lightbox2" role="button" tabindex="0" src="/images/Alarmserver_01.png" width="600" height="98" layout="responsive" class="shadow"></amp-img>
                        </div>
                        <p>
                          Sie müssen einen sogenannten URL-Codierer verwenden um Leerzeichen Ihrer Webadresse zu nutzen. Ein Beispiel-Befehl für das Heimautomations-System FHEM ist das Setzen eines Alarms auf das Auslösen eines Alarm Events. Der Befehl wird für die Kamera zu set%20alarm%20on codiert. Der empfangende FHEM Server wird dann %20 wieder zu einem Leerzeichen decodieren. Falls Ihr FHEM Alarm Server zum Beispiel die lokale IP Adresse 192.168.1.66 hat, ist die Server Adresse, die Sie in die Weboberfläche der Kamera eintippen müssen, damit das Alarm Event aktiviert wird ist:<br/><br/>http://192.168.1.66/fhem?cmd=set%20alarm%20on<br/>(Die maximale Länge der URL ist 128 Zeichen.)
                        </p>
                        <amp-lightbox id="lightbox2" layout="nodisplay">
                            <div class="lightbox" on="tap:lightbox2.close" tabindex="0" class="centered">
                                <amp-img on="tap:lightbox2.close" role="button" tabindex="0" src="/images/Alarmserver_01.png" width="600" height="98" layout="responsive" class="shadow"></amp-img>
                            </div>
                        </amp-lightbox>
                    </div>
                    <!-- /margin -->

                    <div class="margin">
                        <p>
                          Sie können prüfen ob der Befehl korrekt gespeichert wurde, indem Sie  den CGI Befehl <span class="code">http://192.168.1.230/get_params.cgi</span> (192.168.1.230 muss durch die IP-Adresse Ihrer Kamera ersetzt werden) zum Abrufen Ihrer Konfiguration eingeben. Falls Sie noch nicht eingeloggt sind, werden Sie nach den Administrator-Login Daten gefragt. Scrollen Sie nach unten zur Parameter-Liste und suchen Sie nach der Variablen <strong>alarm_http_url</strong>.
                        </p>
                        <div>
                            <amp-img on="tap:lightbox3" role="button" tabindex="0" src="/images/Alarmserver_02.png" width="600" height="39" layout="responsive" class="shadow"></amp-img>
                        </div>
                        <p>
                          Sie können prüfen ob der FHEM Befehl und die Serveradresse korrekt ist, indem Sie sie die Kamera Konfigurationsseite mit dem CGI Befehl <strong>get_params.cgi</strong> aufrufen.
                        </p>
                        <amp-lightbox id="lightbox3" layout="nodisplay">
                            <div class="lightbox" on="tap:lightbox3.close" tabindex="0" class="centered">
                                <amp-img on="tap:lightbox3.close" role="button" tabindex="0" src="/images/Alarmserver_02.png" width="600" height="39" layout="responsive" class="shadow"></amp-img>
                            </div>
                        </amp-lightbox>
                    </div>
                    <!-- /margin -->

                    <div class="margin">
                        <div>
                            <amp-img on="tap:lightbox4" role="button" tabindex="0" src="/images/Alarmserver_03.png" width="600" height="43" layout="responsive" class="shadow"></amp-img>
                        </div>
                        <p>
                          Die Serveradresse muss mit der %20 Codierung gespeichert werden.
                        </p>
                        <amp-lightbox id="lightbox4" layout="nodisplay">
                            <div class="lightbox" on="tap:lightbox4.close" tabindex="0" class="centered">
                                <amp-img on="tap:lightbox4.close" role="button" tabindex="0" src="/images/Alarmserver_03.png" width="600" height="43" layout="responsive" class="shadow"></amp-img>
                            </div>
                        </amp-lightbox>
                    </div>
                    <!-- /margin -->

                    <div class="margin">
                        <div>
                            <amp-img on="tap:lightbox5" role="button" tabindex="0" src="/images/Alarmserver_04.png" width="600" height="228" layout="responsive" class="shadow"></amp-img>
                        </div>
                        <p>
                          Jedes Mal wenn ein Alarm ausgelöst wird, wird die HTTP Anfrage an ihr Heimautomations-System gesendet und Ihren eigenen Befehl auslösen.
                        </p>
                        <amp-lightbox id="lightbox5" layout="nodisplay">
                            <div class="lightbox" on="tap:lightbox5.close" tabindex="0" class="centered">
                                <amp-img on="tap:lightbox5.close" role="button" tabindex="0" src="/images/Alarmserver_04.png" width="600" height="228" layout="responsive" class="shadow"></amp-img>
                            </div>
                        </amp-lightbox>
                    </div>
                    <!-- /margin -->

                    <div class="margin">
                        <h2>Problembehebung</h2>
                        <h4>Was sollten Sie tun, wenn Ihre Kamera den codierten %20 Befehl nicht speichert?</h4>
                        <p>
                          Wie oben erwähnt, werden Sie wahrscheinlich bereits eine Weboberfläche nutzen die auf die Codierung achtet und den Befehl korrekt abspeichert. - <strong>bitte überspringen Sie diesen Paragraph wenn dies der Fall ist</strong>. Im Folgenden verwenden wir einen kleinen Trick um die Codierung für uns, statt gegen uns zu nutzen:
                        </p>
                        <div>
                            <amp-img on="tap:lightbox6" role="button" tabindex="0" src="/images/Alarmserver_06.png" width="600" height="43" layout="responsive" class="shadow"></amp-img>
                        </div>
                        <p>
                          Was sollten Sie tun, wenn der CGI Befehl get_params.cgi Ihnen anzeigt, dass der Befehl mit Leerzeichen statt mit %20 gespeichert wurde?
					              </p>
                        <amp-lightbox id="lightbox6" layout="nodisplay">
                            <div class="lightbox" on="tap:lightbox6.close" tabindex="0" class="centered">
                                <amp-img on="tap:lightbox6.close" role="button" tabindex="0" src="/images/Alarmserver_06.png" width="600" height="43" layout="responsive" class="shadow"></amp-img>
                            </div>
                        </amp-lightbox>
                    </div>
                    <!-- /margin -->

                    <div class="margin">
                        <div>
                            <amp-img on="tap:lightbox6" role="button" tabindex="0" src="/images/Alarmserver_07.png" width="600" height="233" layout="responsive" class="shadow"></amp-img>
                        </div>
                        <p>
                          Ihre Kamer sendet jetzt bei jedem Alarm die HTTP-Anfrage. Die Anfrage wird allerdings vor dem ersten Leerzeichen abgeschnitten - macht den Befehl damit unbrauchbar.<br/><br/>Wir können das Problem lösen, indem wir den automatischen URL Codierer die korrekte URL codieren lassen. Dies wird durch Codieren des % in ein %25 durchgeführt. Die Serveradresse wird zu:<br/><br/><span class="code">http://192.168.1.66/fhem?cmd=set%2520alarm%2520on</span><br/><br/>Der automatische Codierer wird die korrekte Adresse generieren, sobald Sie diese Adresse bestätigen:<br/><br/><span class="code">http://192.168.1.66/fhem?cmd=set%20alarm%20on</span>
                        </p>
                        <amp-lightbox id="lightbox6" layout="nodisplay">
                            <div class="lightbox" on="tap:lightbox6.close" tabindex="0" class="centered">
                                <amp-img on="tap:lightbox6.close" role="button" tabindex="0" src="/images/Alarmserver_07.png" width="600" height="233" layout="responsive" class="shadow"></amp-img>
                            </div>
                        </amp-lightbox>
                    </div>
                    <!-- /margin -->

                    <div class="margin">
                        <div>
                            <amp-img on="tap:lightbox7" role="button" tabindex="0" src="/images/Alarmserver_05.png" width="600" height="98" layout="responsive" class="shadow"></amp-img>
                        </div>
                        <p>
                          Um das zu verhindern, codieren Sie das Leerzeichen mit %2520 statt %20..<br/><br/>Bitte den Bestätigen-Button nicht ein zweites Mal drücken - da dies statt der %20 wieder ein Leerzeichen einsetzen würde. Sie können das Ergebnis durch den <strong>get_params.cgi</strong> Befehl prüfen.
                        </p>
                        <amp-lightbox id="lightbox7" layout="nodisplay">
                            <div class="lightbox" on="tap:lightbox7.close" tabindex="0" class="centered">
                                <amp-img on="tap:lightbox7.close" role="button" tabindex="0" src="/images/Alarmserver_05.png" width="600" height="98" layout="responsive" class="shadow"></amp-img>
                            </div>
                        </amp-lightbox>
                    </div>
                    <!-- /margin -->

                </article>
                <!-- /article -->
            </div>
            <!-- /container -->
        </div>
        <!-- /wrap -->

        <% include ../_partials/content/_bluenav-md-mobile.ejs %>

        <footer>
            <% include ../_partials/amp/_amp-footer.ejs %>
        </footer>
    </body>
</html>
