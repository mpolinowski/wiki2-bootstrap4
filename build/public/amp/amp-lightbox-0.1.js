(window.AMP = window.AMP || []).push((function(AMP) {var process={env:{NODE_ENV:"production"}};var f,m=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a}(this);function p(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(m.Object.defineProperties){var e=m.Object.getOwnPropertyDescriptor(b,d);e&&m.Object.defineProperty(a,d,e)}else a[d]=b[d]}var r=null,u="";
function v(){if(window.context&&window.context.mode)return window.context.mode;var a=!!("localhost"==location.hostname||location.ancestorOrigins&&location.ancestorOrigins[0]&&0==location.ancestorOrigins[0].indexOf("http://localhost:"))&&!!document.querySelector('script[src*="/dist/"],script[src*="/base/"]');var b=location.originalHash||location.hash,c=Object.create(null);if(b){if(0==b.indexOf("?")||0==b.indexOf("#"))b=b.substr(1);for(var b=b.split("&"),d=0;d<b.length;d++){var e=b[d],g=e.indexOf("="),
h;-1!=g?(h=decodeURIComponent(e.substring(0,g)).trim(),e=decodeURIComponent(e.substring(g+1)).trim()):(h=decodeURIComponent(e).trim(),e="");h&&(c[h]=e)}}var k=c;u||(c=window,u=a?"1468956052606":c.AMP_CONFIG&&c.AMP_CONFIG.v?c.AMP_CONFIG.v:"1468956052606");return{localDev:a,development:!("1"!=k.development&&!window.AMP_DEV_MODE),filter:k.filter,minified:"production"==process.env.NODE_ENV,test:!(!window.AMP_TEST&&!window.__karma__),log:k.log,version:u}};var w=(new Date).getTime();function x(a,b,c){this.win=a;this.ga=b;this.i=this.win.console&&this.win.console.log&&"0"!=(r?r:r=v()).log?this.ga(r?r:r=v()):0;this.I=c||""}function y(a,b,c,d){if(0!=a.i){var e=a.win.console.log;"ERROR"==c?e=a.win.console.error||e:"INFO"==c?e=a.win.console.info||e:"WARN"==c&&(e=a.win.console.warn||e);d.unshift((new Date).getTime()-w,"["+b+"]");e.apply(a.win.console,d)}}f=x.prototype;f.isEnabled=function(){return 0!=this.i};
f.fine=function(a,b){4<=this.i&&y(this,a,"FINE",Array.prototype.slice.call(arguments,1))};f.info=function(a,b){3<=this.i&&y(this,a,"INFO",Array.prototype.slice.call(arguments,1))};f.warn=function(a,b){2<=this.i&&y(this,a,"WARN",Array.prototype.slice.call(arguments,1))};f.error=function(a,b){if(1<=this.i)y(this,a,"ERROR",Array.prototype.slice.call(arguments,1));else{var c=z.apply(null,Array.prototype.slice.call(arguments,1));A(this,c);this.win.setTimeout(function(){throw c;})}};
f.createError=function(a){var b=z.apply(null,arguments);A(this,b);return b};f.assert=function(a,b,c){var d;if(!a){var e=(b||"Assertion failed").split("%s"),g=e.shift(),h=g,k=[];""!=g&&k.push(g);for(g=2;g<arguments.length;g++){var l=arguments[g];l&&l.tagName&&(d=l);var t=e.shift();k.push(l);var q=t.trim();""!=q&&k.push(q);var q=h,n;n=l;n=n instanceof Element?n.tagName.toLowerCase()+(n.id?"#"+n.id:""):n;h=q+(n+t)}g=Error(h);g.fromAssert=!0;g.associatedElement=d;g.messageArray=k;A(this,g);throw g;}return a};
f.assertEnumValue=function(a,b,c){for(var d in a)if(a[d]==b)return a[d];this.assert(!1,'Unknown %s value: "%s"',c||"enum",b)};function A(a,b){a.I&&(b.message?-1==b.message.indexOf(a.I)&&(b.message+=a.I):b.message=a.I)}function z(a){for(var b=null,c="",d=0;d<arguments.length;d++){var e=arguments[d];e instanceof Error&&!b?b=e:(c&&(c+=" "),c+=e)}b?c&&(b.message=c+": "+b.message):b=Error(c);return b}var B=new x(window,function(a){var b=parseInt(a.log,10);return a.development||1<=b?4:0},"\u200b\u200b\u200b");
new x(window,function(a){a=parseInt(a.log,10);return 3<=a?4:2<=a?3:0});function C(a,b){var c;return D(a,a,b,c?c:void 0)}function E(a){var b=F;return D(a,a,"timer",void 0,b)}function D(a,b,c,d,e){var g=a,h=g.services;h||(h=g.services={});var k=h;(g=k[c])||(g=k[c]={obj:null,promise:null,resolve:null});g.obj||(g.obj=e?new e(b):d(b),g.resolve&&g.resolve(g.obj));return g.obj};function F(a){this.win=a;this.la=Promise.resolve();this.ma=0;this.M={};this.H=this.now()}f=F.prototype;f.now=function(){return Date.now()};f.timeSinceStart=function(){return this.now()-this.H};f.delay=function(a,b){var c=this;if(!b){var d="p"+this.ma++;this.la.then(function(){c.M[d]?delete c.M[d]:a()});return d}return this.win.setTimeout(a,b)};f.cancel=function(a){"string"==typeof a?this.M[a]=!0:this.win.clearTimeout(a)};
f.promise=function(a,b){var c=this,d=null;return(new Promise(function(e,g){d=c.delay(function(){d=-1;e(b)},a);-1==d&&g(Error("Failed to schedule timer."))})).catch(function(a){-1!=d&&c.cancel(d);throw a;})};f.timeoutPromise=function(a,b,c){var d=this,e=null,g=(new Promise(function(b,g){e=d.delay(function(){e=-1;g(B.createError(c||"timeout"))},a);-1==e&&g(Error("Failed to schedule timer."))})).catch(function(a){-1!=e&&d.cancel(e);throw a;});return b?Promise.race([g,b]):g};var G=E(window);function H(){this.m=[]}H.prototype.add=function(a){var b=this;this.m.push(a);return function(){b.remove(a)}};H.prototype.remove=function(a){a=this.m.indexOf(a);-1<a&&this.m.splice(a,1)};H.prototype.fire=function(a){for(var b=this.m,c=0;c<b.length;c++)(0,b[c])(a)};H.prototype.getHandlerCount=function(){return this.m.length};var I=Object.create(null),J="Webkit webkit Moz moz ms O o".split(" ");function K(a){var b={position:"fixed",zIndex:1E3,top:0,left:0,bottom:0,right:0},c;for(c in b){var d=a,e=b[c],g;g=d.style;var h=c,k=I[h];if(!k){k=h;if(void 0===g[h]){var l;l=h;l=l.charAt(0).toUpperCase()+l.slice(1);a:{for(var t=0;t<J.length;t++){var q=J[t]+l;if(void 0!==g[q]){l=q;break a}}l=""}void 0!==g[l]&&(k=l)}I[h]=k}(g=k)&&(d.style[g]=e)}};function L(a,b,c){var d=this;this.V=E(a);this.fa=b;this.ea=c||0;this.u=-1;this.O=0;this.U=!1;this.ca=function(){return d.G()}}L.prototype.isPending=function(){return-1!=this.u};L.prototype.schedule=function(a){a=a||this.ea;this.U&&10>a&&(a=10);var b=this.V.now()+a;return!this.isPending()||-10>b-this.O?(this.cancel(),this.O=b,this.u=this.V.delay(this.ca,a),!0):!1};L.prototype.G=function(){this.u=-1;this.O=0;this.U=!0;this.fa();this.U=!1};
L.prototype.cancel=function(){this.isPending()&&(this.V.cancel(this.u),this.u=-1)};function M(a,b,c,d){this.type=a;this.data=b;this.time=c;this.event=d}
function N(a){this.g=a;this.b=[];this.B=[];this.f=[];this.a=[];this.c=null;this.K=!1;this.G=new L(a.ownerDocument.defaultView,this.$.bind(this));this.ba=new H;this.P=Object.create(null);this.Z=this.ka.bind(this);this.X=this.ia.bind(this);this.Y=this.ja.bind(this);this.W=this.ha.bind(this);this.g.addEventListener("touchstart",this.Z);this.g.addEventListener("touchend",this.X);this.g.addEventListener("touchmove",this.Y);this.g.addEventListener("touchcancel",this.W)}
function O(a){var b=a.__AMP_Gestures;b||(b=new N(a),a.__AMP_Gestures=b);return b}f=N.prototype;f.cleanup=function(){this.g.removeEventListener("touchstart",this.Z);this.g.removeEventListener("touchend",this.X);this.g.removeEventListener("touchmove",this.Y);this.g.removeEventListener("touchcancel",this.W);this.G.cancel()};f.onGesture=function(a,b){var c=new a(this),d=c.getType(),e=this.P[d];e||(this.b.push(c),e=new H,this.P[d]=e);return e.add(b)};f.onPointerDown=function(a){return this.ba.add(a)};
f.ka=function(a){var b=G.now();this.K=!1;this.ba.fire(a);for(var c=0;c<this.b.length;c++)if(!this.f[c]&&(this.a[c]&&this.a[c]<b&&P(this,c),this.b[c].onTouchStart(a))){var d=c;this.B[d]=!0;this.a[d]=0}Q(this,a)};f.ja=function(a){for(var b=G.now(),c=0;c<this.b.length;c++)this.B[c]&&(this.a[c]&&this.a[c]<b?P(this,c):this.b[c].onTouchMove(a)||P(this,c));Q(this,a)};
f.ia=function(a){for(var b=G.now(),c=0;c<this.b.length;c++)this.B[c]&&(this.a[c]&&this.a[c]<b?P(this,c):(this.b[c].onTouchEnd(a),(!this.a[c]||this.a[c]<b)&&P(this,c)));Q(this,a)};f.ha=function(a){for(var b=0;b<this.b.length;b++){var c=b;this.f[c]=0;P(this,c)}Q(this,a)};function Q(a,b){var c=!!a.c||a.K;a.K=!1;if(!c)for(var d=G.now(),e=0;e<a.b.length;e++)if(a.f[e]||a.a[e]&&a.a[e]>=d){c=!0;break}c&&(b.stopPropagation(),b.preventDefault());a.aa&&(a.aa=!1,a.$())}
f.$=function(){for(var a=G.now(),b=-1,c=0;c<this.b.length;c++)if(!this.f[c])this.a[c]&&this.a[c]<a&&P(this,c);else if(-1==b||this.f[c]>this.f[b])b=c;if(-1!=b){for(var d=0,c=0;c<this.b.length;c++)!this.f[c]&&this.B[c]&&(d=Math.max(d,this.a[c]-a));if(2>d){for(var a=b,c=this.b[a],e=0;e<this.b.length;e++)if(e!=a){var g=e;this.f[g]=0;P(this,g)}this.f[a]=0;this.a[a]=0;this.c=c;c.acceptStart()}else this.G.schedule(d)}};function P(a,b){a.B[b]=!1;a.a[b]=0;a.f[b]||a.b[b].acceptCancel()}
function R(a,b){this.na=a;this.F=b}f=R.prototype;f.getType=function(){return this.na};f.signalReady=function(a){var b=this.F;if(b.c)this.acceptCancel();else{for(var c=G.now(),d=0;d<b.b.length;d++)b.b[d]==this&&(b.f[d]=c+a,b.a[d]=0);b.aa=!0}};f.signalPending=function(a){var b=this.F;if(b.c)this.acceptCancel();else for(var c=G.now(),d=0;d<b.b.length;d++)b.b[d]==this&&(b.a[d]=c+a)};f.signalEnd=function(){var a=this.F;a.c==this&&(a.c=null,a.K=!0)};
f.signalEmit=function(a,b){var c=this.F.P[this.getType()];c&&c.fire(new M(this.getType(),a,G.now(),b))};f.acceptStart=function(){};f.acceptCancel=function(){};f.onTouchStart=function(){return!1};f.onTouchMove=function(){return!1};f.onTouchEnd=function(){};function S(a,b,c){1>b&&(b=1);var d=a/b,e=.5+Math.min(b/33.34,.5);return d*e+c*(1-e)};function T(a,b,c,d){R.call(this,a,b);this.C=c;this.J=d;this.c=!1;this.l=this.j=this.R=this.D=this.H=this.T=this.S=this.s=this.o=this.A=this.w=0}p(T,R);f=T.prototype;f.onTouchStart=function(a){a=a.touches;if(!a||1!=a.length)return!1;this.H=G.now();this.w=a[0].clientX;this.A=a[0].clientY;return!0};
f.onTouchMove=function(a){var b=a.changedTouches||a.touches;if(b&&1==b.length){var c=b[0].clientX,b=b[0].clientY;this.o=c;this.s=b;if(this.c)U(this,!1,!1,a);else if(a=Math.abs(c-this.w),c=Math.abs(b-this.A),this.C&&this.J)(8<=a||8<=c)&&this.signalReady(-10);else if(this.C)if(8<=a&&a>c)this.signalReady(-10);else{if(8<=c)return!1}else if(this.J)if(8<=c&&c>a)this.signalReady(-10);else{if(8<=a)return!1}else return!1}return!0};f.onTouchEnd=function(a){this.c&&(this.c=!1,U(this,!1,!0,a),this.signalEnd())};
f.acceptStart=function(){this.c=!0;this.S=this.w;this.T=this.A;this.R=this.H;this.w=this.o;this.A=this.s;U(this,!0,!1,null)};f.acceptCancel=function(){this.c=!1};function U(a,b,c,d){a.D=G.now();var e=a.D-a.R;if(!c&&4<e||c&&16<e)a.j=S(a.o-a.S,e,a.j),a.l=S(a.s-a.T,e,a.l),a.j=1E-4<Math.abs(a.j)?a.j:0,a.l=1E-4<Math.abs(a.l)?a.l:0,a.S=a.o,a.T=a.s,a.R=a.D;a.signalEmit({first:b,last:c,time:a.D,deltaX:a.C?a.o-a.w:0,deltaY:a.J?a.s-a.A:0,velocityX:a.C?a.j:0,velocityY:a.J?a.l:0},d)}
function V(a){T.call(this,"swipe-xy",a,!0,!0)}p(V,T);function W(a){AMP.BaseElement.apply(this,arguments)}p(W,AMP.BaseElement);f=W.prototype;f.isLayoutSupported=function(a){return"nodisplay"==a};f.buildCallback=function(){var a=this;K(this.element);var b=this.getRealChildren();this.h=this.element.ownerDocument.createElement("div");this.applyFillContent(this.h);this.element.appendChild(this.h);b.forEach(function(b){a.h.appendChild(b)});this.registerAction("close",this.close.bind(this));var c=O(this.element);c.onGesture(V,function(){});this.N=-1};
f.layoutCallback=function(){return Promise.resolve()};
f.activate=function(){var a=this;this.L=this.da.bind(this);this.getWin().document.documentElement.addEventListener("keydown",this.L);this.getViewport().enterLightboxMode();this.mutateElement(function(){a.element.style.display="";a.element.style.opacity=0;a.element.style.transition="opacity 0.1s ease-in";C(a.getWin(),"vsync").mutate(function(){a.element.style.opacity=""})}).then(function(){a.updateInViewport(a.h,!0);a.scheduleLayout(a.h)});C(this.element.ownerDocument.defaultView,"history").push(this.close.bind(this)).then(function(b){a.N=
b})};f.da=function(a){27==a.keyCode&&this.close()};f.close=function(){this.getViewport().leaveLightboxMode();this.element.style.display="none";-1!=this.N&&C(this.element.ownerDocument.defaultView,"history").pop(this.N);this.getWin().document.documentElement.removeEventListener("keydown",this.L);this.L=null;this.schedulePause(this.h)};AMP.registerElement("amp-lightbox",W);
}));
//# sourceMappingURL=amp-lightbox-0.1.js.map

